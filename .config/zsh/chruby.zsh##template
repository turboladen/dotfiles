#------------------------------------------------------------------------------
# Make chruby rubies available when using from non-interactive sessions (ex.
# from vim)
#
# `brew install chruby ruby-install`
#------------------------------------------------------------------------------
{% if yadm.class == "AppleSilicon" %}
brew_prefix=/opt/homebrew
{% else %}
brew_prefix=/usr/local
{% endif %}

if [[ -f $brew_prefix/opt/chruby/share/chruby/chruby.sh ]]; then
  source $brew_prefix/opt/chruby/share/chruby/chruby.sh
  # Switch to the most recent ruby
  chruby 3
  source $brew_prefix/opt/chruby/share/chruby/auto.sh
else
  echo "chruby not found."
fi
